<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AaMilNa â€¢ Admin Approval</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;1,600&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Poppins',sans-serif;background:#fff7f0;color:#4a3b47;overflow-x:hidden;}
.bubble-bg{position:fixed;inset:0;z-index:-1;overflow:hidden;}
.bubble{position:absolute;width:260px;height:260px;border-radius:50%;
background:radial-gradient(circle at top left,rgba(255,255,255,0.9),rgba(255,220,230,0.45),rgba(200,150,170,0.25));
animation:float 30s infinite ease-in-out;}
.bubble::after{content:"ðŸŒ¸";display:flex;align-items:center;justify-content:center;height:100%;font-size:70px;opacity:.35;}
.bubble:nth-child(1){top:10%;left:6%;}
.bubble:nth-child(2){top:55%;left:72%;}
.bubble:nth-child(3){top:30%;left:42%;}
@keyframes float{0%{transform:translateY(0);}50%{transform:translateY(-60px);}100%{transform:translateY(0);}}
header{display:flex;justify-content:space-between;align-items:center;padding:22px 50px;background:rgba(255,255,255,0.85);backdrop-filter:blur(8px);box-shadow:0 8px 25px rgba(0,0,0,0.08);}
header h1{font-family:'Playfair Display',serif;font-style:italic;}
.dashboard{max-width:1400px;margin:120px auto 80px;padding:0 30px;}
.section{margin-bottom:60px;}
.section h2{margin-bottom:20px;font-family:'Playfair Display',serif;font-style:italic;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px;}
.card{background:white;padding:22px;border-radius:26px;box-shadow:0 18px 40px rgba(0,0,0,0.12);}
.card img{width:100%;height:auto;max-height:320px;object-fit:contain;border-radius:18px;background:#f6f1ee;margin-bottom:14px;}
.card h4{margin-bottom:4px;}
.card p{font-size:14px;opacity:.8;margin-bottom:4px;}
.card strong{display:block;margin-top:4px;}
.card .artisan{font-size:13px;margin:2px 0;font-weight:500;opacity:.8;}
.status{font-size:13px;margin:6px 0;font-weight:500;}
.date{font-size:12px;margin:2px 0;opacity:.6;}
.actions{display:flex;flex-direction:column;gap:8px;margin-top:14px;}
.actions button{padding:9px;border:none;border-radius:20px;cursor:pointer;font-weight:500;transition:.3s;}
.approve{background:#c7e3c2;}
.reject{background:#f3c2c2;}
.delete{background:#d8a7a0;}
.approve:hover{background:#b5d9b0;}
.reject:hover{background:#e7a9a9;}
.delete:hover{background:#c8928a;}
textarea{width:100%;padding:8px;border-radius:12px;border:1px solid #ddd;margin-top:6px;font-family:'Poppins';resize:none;}
</style>
</head>
<body>

<div class="bubble-bg">
  <div class="bubble"></div>
  <div class="bubble"></div>
  <div class="bubble"></div>
</div>

<header>
  <h1>Admin â€¢ Product Review</h1>
</header>

<section class="dashboard">
  <div class="section">
    <h2>Pending Products</h2>
    <div class="grid" id="pendingProducts"></div>
  </div>
  <div class="section">
    <h2>Approved Products</h2>
    <div class="grid" id="approvedProducts"></div>
  </div>
  <div class="section">
    <h2>Rejected Products</h2>
    <div class="grid" id="rejectedProducts"></div>
  </div>
  <div class="section">
    <h2>Deleted Products</h2>
    <div class="grid" id="deletedProducts"></div>
  </div>
</section>

<script>
// ===== INITIAL TEST PRODUCTS =====
if(!localStorage.getItem("allProducts")){
  const sampleProducts = [
    {name:"Handmade Clay Vase",description:"Beautiful rustic vase made by hand.",price:1200,artisanName:"Sara Ali",images:["https://res.cloudinary.com/demo/image/upload/v1699999999/vase1.jpg","https://res.cloudinary.com/demo/image/upload/v1699999999/vase2.jpg"],statusAdmin:"Pending",reason:"",date:new Date().toLocaleString()},
    {name:"Macrame Wall Hanging",description:"Boho style wall decor.",price:900,artisanName:"Ahmed Khan",images:["https://res.cloudinary.com/demo/image/upload/v1699999999/macrame1.jpg"],statusAdmin:"Pending",reason:"",date:new Date().toLocaleString()}
  ];
  localStorage.setItem("allProducts", JSON.stringify(sampleProducts));
}

// FETCH PRODUCTS
let products = JSON.parse(localStorage.getItem("allProducts")) || [];
products.forEach(p=>{if(!p.statusAdmin)p.statusAdmin="Pending";if(!p.reason)p.reason="";if(!p.date)p.date=new Date().toLocaleString();});

// CONTAINERS
const pendingContainer = document.getElementById("pendingProducts");
const approvedContainer = document.getElementById("approvedProducts");
const rejectedContainer = document.getElementById("rejectedProducts");
const deletedContainer = document.getElementById("deletedProducts");

// RENDER FUNCTION
function render(){
  pendingContainer.innerHTML=""; approvedContainer.innerHTML=""; rejectedContainer.innerHTML=""; deletedContainer.innerHTML="";
  products.forEach((p,i)=>{
    const div=document.createElement("div");
    div.className="card"; div.dataset.index=i;
    let imgHTML='';
    if(p.images && p.images.length){p.images.forEach(url=>{imgHTML+=`<img src="${url}" alt="${p.name}">`;});}
    else{imgHTML=`<img src="https://via.placeholder.com/300" alt="placeholder">`;}
    div.innerHTML=`
      ${imgHTML}
      <h4>${p.name}</h4>
      <div class="artisan">By: ${p.artisanName||"Unknown Artisan"}</div>
      <p>${p.description}</p>
      <strong>PKR ${p.price}</strong>
      <div class="status">Status: ${p.statusAdmin}</div>
      <div class="date">Last updated: ${p.date}</div>
      ${p.statusAdmin==="Pending"?`<textarea placeholder="Reason (optional)">${p.reason}</textarea>
      <div class="actions">
        <button class="approve">Approve</button>
        <button class="reject">Reject</button>
        <button class="delete">Delete</button>
      </div>`:""}
    `;
    if(p.statusAdmin==="Pending") pendingContainer.appendChild(div);
    else if(p.statusAdmin==="Approved") approvedContainer.appendChild(div);
    else if(p.statusAdmin==="Rejected") rejectedContainer.appendChild(div);
    else if(p.statusAdmin==="Deleted") deletedContainer.appendChild(div);
  });
}

// PENDING ACTIONS
pendingContainer.addEventListener("click",e=>{
  const card=e.target.closest(".card");
  if(!card) return;
  const index=parseInt(card.dataset.index);
  const reasonField=card.querySelector("textarea");
  if(e.target.classList.contains("approve")){
    products[index].statusAdmin="Approved"; products[index].reason=""; products[index].date=new Date().toLocaleString();
    save();
  }
  if(e.target.classList.contains("reject")){
    products[index].statusAdmin="Rejected"; products[index].reason=reasonField.value.trim()||"No reason provided"; products[index].date=new Date().toLocaleString();
    save();
  }
  if(e.target.classList.contains("delete")){
    if(confirm("Delete permanently?")){
      products[index].statusAdmin="Deleted"; products[index].date=new Date().toLocaleString();
      save();
    }
  }
});

// SAVE FUNCTION
function save(){
  localStorage.setItem("allProducts",JSON.stringify(products));
  // SIGNAL SHOP.HTML TO UPDATE AUTOMATICALLY
  localStorage.setItem("productsUpdatedAt", new Date().toISOString());
  render();
}

// INITIAL RENDER
render();
</script>

</body>
</html>










