<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AaMilNa ‚Ä¢ Customer Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;1,600&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Poppins',sans-serif;background:#fff7f0;color:#4a3b47;overflow-x:hidden;}

.bubble-bg{position:fixed;inset:0;z-index:-1;}
.bubble{position:absolute;width:260px;height:260px;border-radius:50%;background:radial-gradient(circle at top left,rgba(255,255,255,.9),rgba(255,220,230,.45),rgba(200,150,170,.25));animation:float 30s infinite ease-in-out;}
.bubble::after{content:"üå∏";display:flex;align-items:center;justify-content:center;height:100%;font-size:70px;opacity:.35;}
.bubble:nth-child(1){top:8%;left:6%;}
.bubble:nth-child(2){top:55%;left:70%;}
.bubble:nth-child(3){top:30%;left:40%;}
@keyframes float{50%{transform:translateY(-60px)}}

header{display:flex;justify-content:space-between;align-items:center;padding:22px 50px;background:rgba(255,255,255,.85);}
header img{height:90px;}
header .actions{display:flex;gap:12px;}
header button{background:#d8a7a0;border:none;padding:10px 22px;border-radius:30px;cursor:pointer;}

.dashboard{max-width:1300px;margin:120px auto 80px;padding:0 30px;}
h1{font-family:'Playfair Display',serif;font-style:italic;font-size:46px;}

.profileBox{display:flex;gap:20px;align-items:center;}
.avatar{width:90px;height:90px;border-radius:50%;object-fit:cover;border:3px solid #d8a7a0;}
.editProfile{margin-top:10px;background:#d8a7a0;border:none;padding:6px 16px;border-radius:20px;font-size:13px;cursor:pointer;}

.layout{display:grid;grid-template-columns:2fr 1fr;gap:30px;}

.box{background:#fff;padding:25px;border-radius:28px;box-shadow:0 20px 40px rgba(0,0,0,.12);margin-bottom:30px;}

.orders{max-height:65vh;overflow-y:auto;}
.order{border-bottom:1px solid #eee;padding:12px 0;}

.likedGrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:18px;}
.likedItem{background:#fff;padding:15px;border-radius:22px;box-shadow:0 12px 30px rgba(0,0,0,.1);position:relative;}
.likedItem img{width:100%;height:150px;object-fit:cover;border-radius:16px;}

.heart{position:absolute;top:12px;right:14px;font-size:22px;cursor:pointer;animation:pulse 1.5s infinite;}
@keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.2);}100%{transform:scale(1);}}

.modal{position:fixed;inset:0;background:#00000066;display:none;align-items:center;justify-content:center;}
.modalContent{background:white;padding:30px;border-radius:26px;width:360px;position:relative;}
.modalContent input,.modalContent textarea{width:100%;margin-bottom:10px;padding:8px;border-radius:12px;border:1px solid #ddd;}
.closeBtn{position:absolute;top:12px;right:16px;font-size:20px;cursor:pointer;color:#b96a6a;}
</style>
</head>

<body>

<div class="bubble-bg">
<div class="bubble"></div>
<div class="bubble"></div>
<div class="bubble"></div>
</div>

<header>
<img src="logo.png">
<div class="actions">
<button onclick="location.href='index.html'">Home</button>
<button onclick="logout()">Logout</button>
</div>
</header>

<section class="dashboard">
<h1>Customer Dashboard</h1>

<div class="box profileBox">
<img id="avatar" class="avatar">
<div>
<strong id="cName"></strong><br>
<small id="cEmail"></small><br>
<button class="editProfile" onclick="openProfile()">Edit Profile</button>
</div>
</div>

<div class="layout">

<div>
<div class="box">
<h3>üõç Order History</h3><br>
<div class="orders" id="orderList"></div>
</div>

<div class="box">
<h3>‚≠ê Your Reviews</h3><br>
<div id="reviewList"></div>
<button class="editProfile" onclick="openReview()">Write Review</button>
</div>
</div>

<div>
<div class="box">
<h3>‚ù§Ô∏è Liked Items</h3><br>
<div class="likedGrid" id="likedList"></div>
</div>
</div>

</div>
</section>

<!-- Profile Modal -->
<div class="modal" id="profileModal">
<div class="modalContent">
<span class="closeBtn" onclick="profileModal.style.display='none'">&times;</span>
<h3>Edit Profile</h3>
<input id="nameInput" placeholder="Your name">
<input id="emailInput" placeholder="Your email">
<input type="file" accept="image/*" id="avatarInput">
<button class="editProfile" onclick="saveProfile()">Save</button>
</div>
</div>

<!-- Review Modal -->
<div class="modal" id="reviewModal">
<div class="modalContent">
<span class="closeBtn" onclick="reviewModal.style.display='none'">&times;</span>
<h3>Write Review</h3>
<textarea id="reviewText" placeholder="Write your review"></textarea>
<button class="editProfile" onclick="saveReview()">Submit</button>
</div>
</div>

<script>
/* =================================
   CUSTOMER DASHBOARD WITH PERSISTENT AVATAR
=================================*/

/* ===== CUSTOMER DATA ===== */
let customer = JSON.parse(localStorage.getItem("customer")) || {
    id: "demo_customer_001",
    name: "AaMilNa Customer",
    email: "customer@aamilna.com",
    avatar: "https://via.placeholder.com/150"
};

/* ===== OTHER DATA ===== */
let orders = JSON.parse(localStorage.getItem("orders")) || [
    { id:1, customerId:customer.id, productName:"Handmade Vase", status:"Delivered" },
    { id:2, customerId:customer.id, productName:"Floral Painting", status:"Processing" }
];

let reviews = JSON.parse(localStorage.getItem("reviews")) || [
    { id:1, customerId:customer.id, text:"Beautiful product!" }
];

let liked = JSON.parse(localStorage.getItem("likedProducts")) || [
    { id:1, customerId:customer.id, name:"Ceramic Mug", image:"https://via.placeholder.com/200" }
];

/* ===== DOM ELEMENTS ===== */
const avatarEl = document.getElementById("avatar");
const cName = document.getElementById("cName");
const cEmail = document.getElementById("cEmail");
const nameInput = document.getElementById("nameInput");
const emailInput = document.getElementById("emailInput");
const orderList = document.getElementById("orderList");
const reviewList = document.getElementById("reviewList");
const likedList = document.getElementById("likedList");
const reviewText = document.getElementById("reviewText");
const avatarInput = document.getElementById("avatarInput");

/* ===== INITIAL RENDER ===== */
renderProfile();
renderOrders();
renderReviews();
renderLiked();

/* ===== PROFILE FUNCTIONS ===== */
function renderProfile(){
    avatarEl.src = customer.avatar;
    cName.textContent = customer.name;
    cEmail.textContent = customer.email;
    localStorage.setItem("customer", JSON.stringify(customer));
}

function openProfile(){
    profileModal.style.display="flex";
    nameInput.value = customer.name;
    emailInput.value = customer.email;
}

// Load avatar as Base64 locally
avatarInput.addEventListener("change", function(e){
    const file = e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = function(event){
        customer.avatar = event.target.result;
        renderProfile();
    }
    reader.readAsDataURL(file);
});

function saveProfile(){
    customer.name = nameInput.value.trim() || customer.name;
    customer.email = emailInput.value.trim() || customer.email;
    renderProfile(); // persist to localStorage
    profileModal.style.display="none";
}

/* ===== ORDERS ===== */
function renderOrders(){
    orderList.innerHTML="";
    orders.filter(o=>o.customerId===customer.id).forEach(o=>{
        orderList.innerHTML+=`
        <div class="order">
        <strong>${o.productName}</strong><br>
        <small>Status: ${o.status}</small>
        </div>`;
    });
    localStorage.setItem("orders", JSON.stringify(orders));
}

/* ===== REVIEWS ===== */
function openReview(){ reviewModal.style.display="flex"; }

function saveReview(){
    if(!reviewText.value.trim()){ alert("Write something first"); return; }
    reviews.push({ id:Date.now(), customerId:customer.id, text:reviewText.value });
    reviewModal.style.display="none";
    reviewText.value="";
    renderReviews();
}

function renderReviews(){
    reviewList.innerHTML="";
    reviews.filter(r=>r.customerId===customer.id).forEach(r=>{
        reviewList.innerHTML+=`<p style="margin-bottom:10px;">"${r.text}"</p>`;
    });
    localStorage.setItem("reviews", JSON.stringify(reviews));
}

/* ===== LIKED ITEMS ===== */
function renderLiked(){
    likedList.innerHTML="";
    liked.filter(p=>p.customerId===customer.id).forEach((p,i)=>{
        likedList.innerHTML+=`
        <div class="likedItem">
        <span class="heart" onclick="removeLiked(${i})">üíñ</span>
        <img src="${p.image}">
        <h4>${p.name}</h4>
        </div>`;
    });
    localStorage.setItem("likedProducts", JSON.stringify(liked));
}

function removeLiked(index){
    liked = liked.filter((p,i)=>i!==index);
    renderLiked();
}

/* ===== CART (ready for integration) ===== */
let cart = JSON.parse(localStorage.getItem("cart")) || [];

/* ===== LOGOUT ===== */
function logout(){
    alert("You are logged out.");
    // Data persists in localStorage
}
</script>

</body>
</html>








